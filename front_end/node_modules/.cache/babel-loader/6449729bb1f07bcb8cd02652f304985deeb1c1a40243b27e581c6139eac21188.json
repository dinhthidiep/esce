{"ast":null,"code":"// Google OAuth Service\nclass GoogleAuthService {\n  constructor() {\n    this.clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || 'your-google-client-id';\n    this.isLoaded = false;\n  }\n\n  // Load Google API\n  loadGoogleAPI() {\n    return new Promise((resolve, reject) => {\n      if (this.isLoaded) {\n        resolve();\n        return;\n      }\n      if (window.gapi) {\n        this.isLoaded = true;\n        resolve();\n        return;\n      }\n      const script = document.createElement('script');\n      script.src = 'https://apis.google.com/js/api.js';\n      script.onload = () => {\n        window.gapi.load('auth2', () => {\n          window.gapi.auth2.init({\n            client_id: this.clientId\n          }).then(() => {\n            this.isLoaded = true;\n            resolve();\n          }).catch(reject);\n        });\n      };\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  }\n\n  // Google Sign In\n  async signIn() {\n    try {\n      await this.loadGoogleAPI();\n      const authInstance = window.gapi.auth2.getAuthInstance();\n      const user = await authInstance.signIn();\n      const profile = user.getBasicProfile();\n      const authResponse = user.getAuthResponse();\n      return {\n        success: true,\n        user: {\n          id: profile.getId(),\n          name: profile.getName(),\n          email: profile.getEmail(),\n          image: profile.getImageUrl(),\n          accessToken: authResponse.access_token,\n          idToken: authResponse.id_token\n        }\n      };\n    } catch (error) {\n      console.error('Google Sign In Error:', error);\n      return {\n        success: false,\n        error: error.message || 'Đăng nhập Google thất bại'\n      };\n    }\n  }\n\n  // Google Sign Out\n  async signOut() {\n    try {\n      if (this.isLoaded && window.gapi) {\n        const authInstance = window.gapi.auth2.getAuthInstance();\n        await authInstance.signOut();\n      }\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Google Sign Out Error:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Check if user is signed in\n  isSignedIn() {\n    if (!this.isLoaded || !window.gapi) return false;\n    const authInstance = window.gapi.auth2.getAuthInstance();\n    return authInstance.isSignedIn.get();\n  }\n\n  // Get current user\n  getCurrentUser() {\n    if (!this.isSignedIn()) return null;\n    const authInstance = window.gapi.auth2.getAuthInstance();\n    const user = authInstance.currentUser.get();\n    const profile = user.getBasicProfile();\n    return {\n      id: profile.getId(),\n      name: profile.getName(),\n      email: profile.getEmail(),\n      image: profile.getImageUrl()\n    };\n  }\n}\n\n// Create singleton instance\nconst googleAuthService = new GoogleAuthService();\nexport default googleAuthService;","map":{"version":3,"names":["GoogleAuthService","constructor","clientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","isLoaded","loadGoogleAPI","Promise","resolve","reject","window","gapi","script","document","createElement","src","onload","load","auth2","init","client_id","then","catch","onerror","head","appendChild","signIn","authInstance","getAuthInstance","user","profile","getBasicProfile","authResponse","getAuthResponse","success","id","getId","name","getName","email","getEmail","image","getImageUrl","accessToken","access_token","idToken","id_token","error","console","message","signOut","isSignedIn","get","getCurrentUser","currentUser","googleAuthService"],"sources":["D:/doan/esce/front_end/src/services/googleAuth.js"],"sourcesContent":["// Google OAuth Service\r\nclass GoogleAuthService {\r\n  constructor() {\r\n    this.clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || 'your-google-client-id';\r\n    this.isLoaded = false;\r\n  }\r\n\r\n  // Load Google API\r\n  loadGoogleAPI() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.isLoaded) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      if (window.gapi) {\r\n        this.isLoaded = true;\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      const script = document.createElement('script');\r\n      script.src = 'https://apis.google.com/js/api.js';\r\n      script.onload = () => {\r\n        window.gapi.load('auth2', () => {\r\n          window.gapi.auth2.init({\r\n            client_id: this.clientId,\r\n          }).then(() => {\r\n            this.isLoaded = true;\r\n            resolve();\r\n          }).catch(reject);\r\n        });\r\n      };\r\n      script.onerror = reject;\r\n      document.head.appendChild(script);\r\n    });\r\n  }\r\n\r\n  // Google Sign In\r\n  async signIn() {\r\n    try {\r\n      await this.loadGoogleAPI();\r\n      \r\n      const authInstance = window.gapi.auth2.getAuthInstance();\r\n      const user = await authInstance.signIn();\r\n      \r\n      const profile = user.getBasicProfile();\r\n      const authResponse = user.getAuthResponse();\r\n      \r\n      return {\r\n        success: true,\r\n        user: {\r\n          id: profile.getId(),\r\n          name: profile.getName(),\r\n          email: profile.getEmail(),\r\n          image: profile.getImageUrl(),\r\n          accessToken: authResponse.access_token,\r\n          idToken: authResponse.id_token\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Google Sign In Error:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message || 'Đăng nhập Google thất bại'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Google Sign Out\r\n  async signOut() {\r\n    try {\r\n      if (this.isLoaded && window.gapi) {\r\n        const authInstance = window.gapi.auth2.getAuthInstance();\r\n        await authInstance.signOut();\r\n      }\r\n      return { success: true };\r\n    } catch (error) {\r\n      console.error('Google Sign Out Error:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n\r\n  // Check if user is signed in\r\n  isSignedIn() {\r\n    if (!this.isLoaded || !window.gapi) return false;\r\n    \r\n    const authInstance = window.gapi.auth2.getAuthInstance();\r\n    return authInstance.isSignedIn.get();\r\n  }\r\n\r\n  // Get current user\r\n  getCurrentUser() {\r\n    if (!this.isSignedIn()) return null;\r\n    \r\n    const authInstance = window.gapi.auth2.getAuthInstance();\r\n    const user = authInstance.currentUser.get();\r\n    const profile = user.getBasicProfile();\r\n    \r\n    return {\r\n      id: profile.getId(),\r\n      name: profile.getName(),\r\n      email: profile.getEmail(),\r\n      image: profile.getImageUrl()\r\n    };\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nconst googleAuthService = new GoogleAuthService();\r\n\r\nexport default googleAuthService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}